# Data Folder Overview (Arrow-based)

## 1Ô∏è‚É£ regulatory_corpus/
Raw regulatory PDFs or DOCXs (per regulator). Example:
- data/regulatory_corpus/qcb/qcb_rulebook.pdf
- data/regulatory_corpus/qfc/qfc_policy.docx

These will be parsed and embedded into YAML rule-packs and FAISS indices.

---

## 2Ô∏è‚É£ datasets/ (Arrow format)

Each dataset (train / val / test) is a **HuggingFace Arrow dataset**, stored with `.arrow` files.
Generated via:

```python
from datasets import DatasetDict, Dataset, load_from_disk
from pathlib import Path
import json

# Build from JSONL or any source
rows = [
  {
    "doc_id": "sha1:example123",
    "regulator_ns": "qcb",
    "path": "data/startups/acme_plan.pdf",
    "text": "",  # optional, can be extracted on the fly
    "targets": {"doc_type": "business_plan", "risk": "high"}
  }
]

ds = Dataset.from_list(rows)
ds.save_to_disk("data/datasets/train")  # creates Arrow files here
```

This format:
- Avoids JSON parsing overhead.
- Memory-maps data ‚Üí fast batch loading and tokenization.
- Scales easily to tens of thousands of docs.

Artifacts:
- `id2label.json`: defines label mapping for doc type and risk.
- `schema.json`: defines dataset schema version for reproducibility.

## 3Ô∏è‚É£ interim/
Intermediate outputs:
- `manifest.json`
- `manifest.enriched.json`
- `manifest.features.json`
Generated by step 1‚Äì2 scripts.

## 4Ô∏è‚É£ processed/
Stores outputs of later stages:
- `chunks/`: text chunks for embeddings.
- `indices/`: FAISS or ANN indices.


---

### üß† `data/datasets/artifacts/id2label.json`
```json
{
  "doc_type": ["business_plan", "policy", "legal", "other"],
  "risk": ["none", "low", "medium", "high"]
}
```